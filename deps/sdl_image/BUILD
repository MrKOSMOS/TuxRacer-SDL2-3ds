load("@rules_cc//cc:defs.bzl", "cc_library")

cc_library(
    name = "sdl_image",
    srcs = glob([
        "*.c",
        "*.h",
    ]),
    hdrs = glob(["*.h"]),
    copts = [
        "-Ideps/sdl/include",
        "-Ideps/sdl_image",
        "-Ideps/sdl_image/external/libpng-1.6.37",
        "-Ideps/sdl_image/external/jpeg-9b",
        "-DLOAD_PNG",
        "-DLOAD_JPG",
    ],
    linkopts = [
        "-lz",
    ],
    visibility = ["//visibility:public"],
    deps = [
        "//deps/sdl",
        "//deps/sdl_image:libjpeg",
        "//deps/sdl_image:libpng",
    ],
    alwayslink = True,
)

cc_library(
    name = "libpng",
    srcs = glob([
        "external/libpng-1.6.37/*.h",
        "external/libpng-1.6.37/arm/*.h",
        "external/libpng-1.6.37/arm/*.c",
    ]) + [
        "external/libpng-1.6.37/png.c",
        "external/libpng-1.6.37/pngerror.c",
        "external/libpng-1.6.37/pngget.c",
        "external/libpng-1.6.37/pngmem.c",
        "external/libpng-1.6.37/pngpread.c",
        "external/libpng-1.6.37/pngread.c",
        "external/libpng-1.6.37/pngrio.c",
        "external/libpng-1.6.37/pngrtran.c",
        "external/libpng-1.6.37/pngrutil.c",
        "external/libpng-1.6.37/pngset.c",
        "external/libpng-1.6.37/pngtrans.c",
        "external/libpng-1.6.37/pngwio.c",
        "external/libpng-1.6.37/pngwrite.c",
        "external/libpng-1.6.37/pngwtran.c",
        "external/libpng-1.6.37/pngwutil.c",
    ],
    hdrs = glob(["external/libpng-1.6.37/*.h"]),
    copts = [
        "-Ideps/sdl/include",
        "-Ideps/sdl_image",
    ],
    visibility = ["//visibility:public"],
    deps = [
        "//deps/sdl",
    ],
    alwayslink = True,
)

cc_library(
    name = "libjpeg",
    srcs = [
        "external/jpeg-9b/jaricom.c",
        "external/jpeg-9b/jcapimin.c",
        "external/jpeg-9b/jcapistd.c",
        "external/jpeg-9b/jcarith.c",
        "external/jpeg-9b/jccoefct.c",
        "external/jpeg-9b/jccolor.c",
        "external/jpeg-9b/jcdctmgr.c",
        "external/jpeg-9b/jchuff.c",
        "external/jpeg-9b/jcinit.c",
        "external/jpeg-9b/jcmainct.c",
        "external/jpeg-9b/jcmarker.c",
        "external/jpeg-9b/jcmaster.c",
        "external/jpeg-9b/jcomapi.c",
        "external/jpeg-9b/jcparam.c",
        "external/jpeg-9b/jcprepct.c",
        "external/jpeg-9b/jcsample.c",
        "external/jpeg-9b/jctrans.c",
        "external/jpeg-9b/jdapimin.c",
        "external/jpeg-9b/jdapistd.c",
        "external/jpeg-9b/jdarith.c",
        "external/jpeg-9b/jdatadst.c",
        "external/jpeg-9b/jdatasrc.c",
        "external/jpeg-9b/jdcoefct.c",
        "external/jpeg-9b/jdcolor.c",
        "external/jpeg-9b/jddctmgr.c",
        "external/jpeg-9b/jdhuff.c",
        "external/jpeg-9b/jdinput.c",
        "external/jpeg-9b/jdmainct.c",
        "external/jpeg-9b/jdmarker.c",
        "external/jpeg-9b/jdmaster.c",
        "external/jpeg-9b/jdmerge.c",
        "external/jpeg-9b/jdpostct.c",
        "external/jpeg-9b/jdsample.c",
        "external/jpeg-9b/jdtrans.c",
        "external/jpeg-9b/jerror.c",
        "external/jpeg-9b/jfdctflt.c",
        "external/jpeg-9b/jfdctfst.c",
        "external/jpeg-9b/jfdctint.c",
        "external/jpeg-9b/jidctflt.c",
        "external/jpeg-9b/jidctfst.c",
        "external/jpeg-9b/jidctint.c",
        "external/jpeg-9b/jmem-android.c",
        "external/jpeg-9b/jmemmgr.c",
        "external/jpeg-9b/jquant1.c",
        "external/jpeg-9b/jquant2.c",
        "external/jpeg-9b/jutils.c",
    ],
    hdrs = glob(["external/jpeg-9b/*.h"]),
    copts = [
        "-Ideps/sdl/include",
        "-Ideps/sdl_image",
    ],
    visibility = ["//visibility:public"],
    deps = [
        "//deps/sdl",
    ],
    alwayslink = True,
)
